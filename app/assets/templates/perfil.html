<div class="container col-xs-12 col-sm-12 col-md-12" id="perfil-page">
  <form class="col-md-12" ng-submit="userFormCtrl.actionForm()">
    <h3 class="header-titule hidden-xs">Cambiar Contraseña</h3>

    <div class="col-md-12 ">
      <div class="form-group col-md-12" ng-class="{ 'has-error':userFormCtrl.errors.password }">
        <label for="InputPassword">Contraseña</label>
        <input ng-model="userFormCtrl.userForm.password" ng-change="userFormCtrl.change('Password')" type="password" class="form-control" id="InputPassword" data-placement="top">
      </div>

      <div class="form-group col-md-12" ng-class="{ 'has-error':userFormCtrl.errors.password_confirmation }">
        <label for="InputPassword_confirmation">Repetir Contraseña</label>
        <input ng-model="userFormCtrl.userForm.password_confirmation"
                  ng-change="userFormCtrl.change('Password_confirmation')"
                  type="password" class="form-control"
                  id="InputPassword_confirmation" data-placement="top" required >
      </div>
    </div>

    <div class="col-md-12">
      <div class="submit-group col-md-4">
        <button class="btn btn-primary" type="submit" id="perfil-submit">Guardar</button>
      </div>
    </div>
  </form>
</div>

<script type="text/javascript">
  (function (exports) {
    function valOrFunction(val, ctx, args) {
        if (typeof val == "function") {
            return val.apply(ctx, args);
        } else {
            return val;
        }
    }

    function InvalidInputHelper(input, options) {
        input.setCustomValidity(valOrFunction(options.defaultText, window, [input]));

        function changeOrInput() {
            if (input.value == "") {
                input.setCustomValidity(valOrFunction(options.emptyText, window, [input]));
            } else {
                input.setCustomValidity("");
            }
        }

        function invalid() {
            if (input.value == "") {
                input.setCustomValidity(valOrFunction(options.emptyText, window, [input]));
            } else {
               console.log("INVALID!"); input.setCustomValidity(valOrFunction(options.invalidText, window, [input]));
            }
        }

          input.addEventListener("change", changeOrInput);
          input.addEventListener("input", changeOrInput);
          input.addEventListener("invalid", invalid);
      }
      exports.InvalidInputHelper = InvalidInputHelper;
  })(window);

  InvalidInputHelper(document.getElementById("InputPassword_confirmation"), {
  defaultText: "Por favor repita su contraseña",

  emptyText: "Por favor repita su contraseña",

  invalidText: function (input) {
    return 'Contraseña inválida';
  }
});
</script>

